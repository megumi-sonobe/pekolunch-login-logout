{% extends 'base.html' %}

{% block title %}
    レシピ一覧 - peko Lunch
{% endblock %}

{% block content %}
<h2>レシピ一覧</h2>

<div class="recipe-grid">
    {% for recipe in recipes %}
        <div class="recipe-item">
            <a href="{% url 'recipes:recipe_detail' recipe.pk %}">
                {% if recipe.image_url %}
                    <img src="{{ recipe.image_url.url }}" alt="{{ recipe.recipe_name }}" width="150" height="150">
                {% else %}
                    <img src="{{ MEDIA_URL }}default_recipe_image.jpg" alt="デフォルト画像" width="150" height="150">
                {% endif %}
                <p>{{ recipe.recipe_name }}</p>
            </a>
            <p>平均評価：{{ recipe.average_evaluation|default:"評価なし" }}</p>
        </div>
    {% endfor %}
</div>

<div class="pagination">
    <span class="step-links">
        {% if page_obj.has_previous %}
            <a href="?page=1">&laquo; 最初</a>
            <a href="?page={{ page_obj.previous_page_number }}">前へ</a>
        {% endif %}

        <span class="current">
            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
        </span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">次へ</a>
            <a href="?page={{ page_obj.paginator.num_pages }}">最後 &raquo;</a>
        {% endif %}
    </span>
</div>

{% endblock %}
